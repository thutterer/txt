<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#00796b"> <!-- Chrome, Firefox OS and Opera -->
    <title>txt</title>
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" href="logo-512.png" />
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">
    <script src="app.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="row">
      <div class="txt" id='txt_0' ondragstart="drag(event)">
        <div class="dropzone before" ondrop="drop(event);" ondragover="allowDrop(event)">
        </div>
        <div class="panel">
          <header>
            <div class="draggable" draggable="true">
              <svg width="10" height="10">
                <circle cx="2" cy="2" r="1" stroke="white" stroke-width="2" />
                <circle cx="2" cy="8" r="1" stroke="white" stroke-width="2" />
                <circle cx="8" cy="2" r="1" stroke="white" stroke-width="2" />
                <circle cx="8" cy="8" r="1" stroke="white" stroke-width="2" />
              </svg>
            </div>

            <button class="collapse" onclick="this.closest('.txt').classList.add('collapsed')">
              <svg width="10" height="10">
                <line x1="1" y1="5" x2="5" y2="1" stroke="white" stroke-width="2" stroke-linecap="round" />
                <line x1="1" y1="5" x2="5" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>

            <input type="text" class="title">

            <button class="uncollapse" onclick="this.closest('.txt').classList.remove('collapsed'); this.closest('.txt').scrollIntoView({behavior: 'smooth'});">
            </button>

            <button class="minimize" onclick="minimizeTxt(this.closest('.txt'));">
              <svg width="10" height="10">
                <line x1="1" y1="9" x2="9" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
            <button class="restore" onclick="restoreTxt(this.closest('.txt'));">
              <svg width="10" height="10">
                <rect x="1" y="1" width="8" height="8" stroke="white" stroke-width="1" fill="transparent" />
                <line x1="1" y1="2" x2="9" y2="2" stroke="white" stroke-width="3" />
              </svg>
            </button>
            <!-- <button class="maximize" onclick="maximizeTxt(this.closest('.txt'));">&#128470;</button> -->
            <button class="close" onclick="this.closest('.txt').remove();">
              <svg width="10" height="10">
                <line x1="1" y1="1" x2="9" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
                <line x1="1" y1="9" x2="9" y2="1" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </header>

          <textarea onkeydown="keyEvents(event)" onfocus="this.closest('.txt').scrollIntoView({behavior: 'smooth'})"></textarea>

          <div class="controls">
            <div class="colors"></div>
            <input title="font size" oninput="changeFontSize(this)" type="range" class="font-size" min="50" max="500" value="100" step="5"/>
          </div>
        </div>
      </div>
    </div>
    <footer id="minimized"></footer>
    <div class="fab" id="fab" onclick="appendTxtToRow()">+</div>
    <script>
      // create the color buttons inside the template-txt (#txt_0)
      for (var i = 1; i <= 8; i++) {
        createColorButton((360 / 8 * i) - 20);
      }

      appendTxtToRow();

      // ask for confirmation before closing the window
      window.addEventListener("beforeunload", function (event) {
        event.returnValue = "Do you want to leave this site? "; // modern browsers show a generic text here
      });
    </script>
  </body>
</html>
