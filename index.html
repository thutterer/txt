<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#00796b">

    <title>txt</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="app.css">
    <script src="app.js" charset="utf-8"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">
  </head>
  <body>
    <div class="row">
      <div class="txt" id='txt_0' ondragstart="drag(event)">
        <div class="dropzone before" ondrop="this.style.background = 'transparent'; drop(event);" ondragover="allowDrop(event)" ondragenter="this.style.background = 'azure';" ondragleave="this.style.background = 'transparent';"></div>
        <div class="panel">
          <header>
            <div class="draggable" draggable="true">
              <svg width="10" height="10">
                <circle cx="2" cy="2" r="1" stroke="white" stroke-width="2" />
                <circle cx="2" cy="8" r="1" stroke="white" stroke-width="2" />
                <circle cx="8" cy="2" r="1" stroke="white" stroke-width="2" />
                <circle cx="8" cy="8" r="1" stroke="white" stroke-width="2" />
              </svg>
            </div>

            <button class="collapse" onclick="this.closest('.txt').classList.add('collapsed')">
              <svg width="10" height="10">
                <line x1="1" y1="5" x2="5" y2="1" stroke="white" stroke-width="2" stroke-linecap="round" />
                <line x1="1" y1="5" x2="5" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>

            <input type="text" class="title">

            <button class="uncollapse" onclick="this.closest('.txt').classList.remove('collapsed'); this.closest('.txt').scrollIntoView({behavior: 'smooth'});">
              <svg width="10" height="10">
                <line x1="1" y1="1" x2="5" y2="5" stroke="white" stroke-width="2" stroke-linecap="round" />
                <line x1="1" y1="9" x2="5" y2="5" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>

            <button class="minimize" onclick="minimizeTxt(this.closest('.txt'));">
              <svg width="10" height="10">
                <line x1="1" y1="9" x2="9" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
            <button class="restore" onclick="restoreTxt(this.closest('.txt'));">
              <svg width="10" height="10">
                <rect x="1" y="1" width="8" height="8" stroke="white" stroke-width="1" fill="transparent" />
                <line x1="1" y1="2" x2="9" y2="2" stroke="white" stroke-width="3" />
              </svg>
            </button>
            <!-- <button class="maximize" onclick="maximizeTxt(this.closest('.txt'));">&#128470;</button> -->
            <button class="close" onclick="removeTxt(this.closest('.txt'), false);">
              <svg width="10" height="10">
                <line x1="1" y1="1" x2="9" y2="9" stroke="white" stroke-width="2" stroke-linecap="round" />
                <line x1="1" y1="9" x2="9" y2="1" stroke="white" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </header>

          <textarea autofocus onkeydown="keyEvents(event)"></textarea>

          <div class="controls">
            <input title="paper size" oninput="changeTxtWidth(this)" type="range" class="window-size" min="0" max="5" value="2" step="1"/>
            <input title="font size" oninput="changeFontSize(this)" type="range" class="font-size" min="50" max="500" value="100" step="5"/>
            <div class="colors"></div>
          </div>
        </div>
      </div>
    </div>
    <footer id="minimized">
    </footer>
    <div class="fab" onclick="appendTxtToRow()">+</div>
    <script>
      // create the color buttons inside the template-txt (#txt_0)
      for (var i = 1; i <= 8; i++) {
        createColorButton((360 / 8 * i) - 20);
      }

      // create the first txt from the template-txt
      appendTxtToRow();

      // ask for confirmation before closing the window
      window.addEventListener("beforeunload", function (event) {
        event.returnValue = "Do you want to leave this site? "; // modern browsers show a generic text here
      });
    </script>

    <a style="position: fixed; top: 0; right: 0; border: 0; z-index: -1;" id="github-ribbon" href="https://github.com/thutterer/txt"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
  </body>
</html>
